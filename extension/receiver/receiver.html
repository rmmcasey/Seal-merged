<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seal - Open Encrypted File</title>
  <link rel="stylesheet" href="receiver.css">
</head>
<body>
  <div id="app">
    <!-- Loading Screen -->
    <div id="screen-loading" class="screen active">
      <div class="loading-state">
        <div class="loading-spinner"></div>
        <p class="loading-text">Checking authentication...</p>
      </div>
    </div>

    <!-- Login Screen -->
    <div id="screen-login" class="screen">
      <div class="brand">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 14C13.1 14 14 14.9 14 16C14 17.1 13.1 18 12 18C10.9 18 10 17.1 10 16C10 14.9 10.9 14 12 14Z" fill="#3B82F6"/>
        </svg>
        <span class="brand-name">Seal</span>
      </div>
      <div class="login-container">
        <p class="login-message">Sign in to decrypt and view sealed files.</p>
        <form id="login-form" class="login-form">
          <div class="form-field">
            <label for="login-email">Email</label>
            <input type="email" id="login-email" class="input" placeholder="you@example.com" required>
          </div>
          <div class="form-field">
            <label for="login-password">Password</label>
            <input type="password" id="login-password" class="input" placeholder="Your password" required>
          </div>
          <div id="login-error" class="login-error" hidden></div>
          <button type="submit" id="btn-login-submit" class="btn btn-primary btn-full">Sign in</button>
        </form>
        <p class="login-hint">Or <a id="btn-login-web" href="#">sign in on seal.email</a></p>
      </div>
    </div>

    <!-- Drop Zone Screen (authenticated) -->
    <div id="screen-drop" class="screen">
      <div class="brand">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 14C13.1 14 14 14.9 14 16C14 17.1 13.1 18 12 18C10.9 18 10 17.1 10 16C10 14.9 10.9 14 12 14Z" fill="#3B82F6"/>
        </svg>
        <span class="brand-name">Seal</span>
        <div class="brand-spacer"></div>
        <div id="user-badge" class="user-badge" title="Signed in">
          <span id="user-email-display" class="user-email"></span>
          <button id="btn-logout" class="btn-icon" title="Sign out">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z" fill="currentColor"/></svg>
          </button>
        </div>
      </div>

      <div id="drop-zone" class="drop-zone">
        <input type="file" id="file-input" accept=".seal" hidden>
        <div class="drop-zone-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
            <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 14C13.1 14 14 14.9 14 16C14 17.1 13.1 18 12 18C10.9 18 10 17.1 10 16C10 14.9 10.9 14 12 14Z" fill="#D1D5DB"/>
          </svg>
        </div>
        <h2>Open a Sealed File</h2>
        <p class="drop-text">Drag &amp; drop your <strong>.seal</strong> file here</p>
        <p class="drop-divider">or</p>
        <button id="btn-browse" class="btn btn-outline">Browse files</button>
        <p class="drop-hint">Only .seal files are accepted</p>
      </div>
    </div>

    <!-- File Info Screen -->
    <div id="screen-info" class="screen">
      <div class="brand">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 14C13.1 14 14 14.9 14 16C14 17.1 13.1 18 12 18C10.9 18 10 17.1 10 16C10 14.9 10.9 14 12 14Z" fill="#3B82F6"/>
        </svg>
        <span class="brand-name">Seal</span>
      </div>

      <div class="file-card">
        <div class="file-card-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20Z" fill="#3B82F6"/>
          </svg>
        </div>
        <div class="file-card-details">
          <p id="info-filename" class="file-card-name"></p>
          <p id="info-size" class="file-card-meta"></p>
        </div>
      </div>

      <div class="info-grid">
        <div class="info-item">
          <span class="info-label">Encrypted</span>
          <span id="info-date" class="info-value"></span>
        </div>
        <div class="info-item">
          <span class="info-label">Expires</span>
          <span id="info-expires" class="info-value"></span>
        </div>
        <div class="info-item">
          <span class="info-label">Recipients</span>
          <span id="info-recipients" class="info-value"></span>
        </div>
        <div class="info-item" id="access-row">
          <span class="info-label">Your access</span>
          <span id="info-access" class="info-value"></span>
        </div>
      </div>

      <button id="btn-open-viewer" class="btn btn-primary btn-full">
        Open in Secure Viewer
      </button>
      <button id="btn-back" class="btn btn-ghost btn-full">
        Open another file
      </button>
    </div>

    <!-- Error Screen -->
    <div id="screen-error" class="screen">
      <div class="error-state">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="#EF4444"/>
        </svg>
        <h2>Invalid File</h2>
        <p id="error-message" class="error-text"></p>
        <button id="btn-error-back" class="btn btn-outline">Try another file</button>
      </div>
    </div>
  </div>

  <script src="receiver.js"></script>
</body>
</html>
